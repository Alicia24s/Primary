<!DOCTYPE html>
<html>
<head>
    <title>Handwash System</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <style>
        body, html {
            height: 100%;
            margin: 0;
            font-family: 'Roboto';
            font-size: 22px;
            background-image: url("Primary\Bubbles.jpg");
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
        }

        h1 {
            text-align: center;
            color: blueviolet;
            font-size: 3em;
            margin-top: 20px;
        }

        .container {
            max-width: 1500px;
            height: 100px
            align: center;
            margin: 10px auto;
            font-size: medium;
            padding: 20px;
            background-color: rgb(168, 177, 190);
            border-style: solid;
        }

        #stepProgressBar {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin: 5px auto;
            width: 80%;
        }

        .step {
            text-align: center;
        }

        .step-text {
            margin-bottom: 5px;
            color: blueviolet;
            font-size: 1.5em;
        }

        .bullet {
            height: 50px;
            width: 50px;
            border-radius: 50%;
            border: 4px solid #0b471f;
            background-color: #00ff55;
            color: black;
            display: inline-block;
            line-height: 60px;
        }

        .bullet.completed {
            color: antiquewhite;
            background-color: aquamarine;
        }

        #info_container {
            margin: 20px auto;
            
        }

        #next_step, #step_message, #step_info_info, #step_info {
            margin-top: 20px;
            text-align: center;
        }

        .main-container {
            display: flex;
            justify-content: space-around;
            padding: 20px;
        }
        
        .solid{
            padding: 10px;
            margin: 10px;
        }
        .solid2, .solid3 {
            background-color: rgb(155, 137, 214);
            border: 2px solid rgb(47, 48, 104);
            border-radius: 10%;
            padding: 10px;
            margin: 10px;
            height: 100px
            box-sizing: border-box;
        }

        .solid3, .solid2 {
            
            width: calc(50% - 20px); /* Adjusted width to make space for Raspberry Pi footage and changing images */
            height: 600px; /* Increased height for Raspberry Pi footage and changing images */
            padding: 20px;
            background-color: rgb(155, 137, 214);
            border: 2px solid rgb(47, 48, 104);
            border-radius: 10%;
            box-sizing: border-box;
        }
        
        #live_video_feed{
            display: center
            width: 90%;
            height: 90%;
            object-fit: cover; /* Maintain aspect ratio for images */
        }
        
        #current_step_gif {
            width: 80%;
            height: 80%;
            object-fit: cover; /* Maintain aspect ratio for images */
        }
        


        #current_step_gif {
            width: 100%;
            height: auto;
        }
    </style>
</head>
<body>
    <h1>Handwash System</h1>

    <div class="container solid">
        <div id="stepProgressBar">
            <div class="step">
                <div class="bullet"></div>
                <p class="step-text"><b>Step-1</b></p>
            </div>
            <div class="step">
                <div class="bullet"></div>
                <p class="step-text"><b>Step-2</b></p>
            </div>
            <div class="step">
                <div class="bullet"></div>
                <p class="step-text"><b>Step-3</b></p>
            </div>
            <div class="step">
                <div class="bullet"></div>
                <p class="step-text"><b>Step-4</b></p>
            </div>
            <div class="step">
                <div class="bullet"></div>
                <p class="step-text"><b>Step-5</b></p>
            </div>
            <div class="step">
                <div class="bullet"></div>
                <p class="step-text"><b>Step-6</b></p>
            </div>
            <div class="step">
                <div class="bullet"></div>
                <p class="step-text"><b>Step-7</b></p>
            </div>
            <div class="step">
                <div class="bullet"></div>
                <p class="step-text"><b>Step-8</b></p>
            </div>
        </div>

         <!--
        <div id="info_container">
            <h3 id="step_message" style="color:aliceblue; font-size: 1.5em;"></h3>
            <h3 id="next_step"><b>Next Step:</b></h3>
            <h3 id="step_info_info">System Message:</h3>
            <h3 id="step_info"></h3> 
        </div>
        -->
    </div>

    <div class="main-container">
        <div class="solid3 text-center">
            <p>Space for raspberry pi footage</p>
            <img id="live_video_feed" src="{{ url_for('video_feed') }}">
        </div>

        <div class="solid2 text-center">
            <p>Space for changing images</p>
            <div id="current_step">
                <img id="current_step_gif" src="" alt="Current Step">
                <p id="current_step_description"></p>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 0;

        function showStep() {
            const step = stepDescriptions[currentStep];
            document.getElementById("current_step_gif").src = step.gif;
            document.getElementById("current_step_description").innerText = step.description;
        }

        const stepDescriptions = [
            { gif: "/static/STEP 1.gif", description: "Step 1 description" },
            { gif: "/static/STEP 2.gif", description: "Step 2 description" },
            { gif: "/static/STEP 3.gif", description: "Step 3 description" },
            { gif: "/static/STEP 4.gif", description: "Step 4 description" },
            { gif: "/static/STEP 5.gif", description: "Step 5 description" },
            { gif: "/static/STEP 6.gif", description: "Step 6 description" },
            { gif: "/static/STEP 7.gif", description: "Step 7 description" }
        ];

        setInterval(function () {
            currentStep = (currentStep + 1) % stepDescriptions.length;
            showStep();
        }, 1000);

        setInterval(function(){
            $.get("/step_info", {}, function(data) {
                document.getElementById("step_info").innerHTML = data;
            });
            $.get("/step_message", {}, function(data) {
                document.getElementById("step_message").innerHTML = data;
            });
        }, 1000);
    </script>
</body>
</html>
